{"ast":null,"code":"import{useEffect,useState}from\"react\";import{collection,getDocs,query,orderBy}from\"firebase/firestore\";import{db}from\"../firebase\";import{useAuth}from\"../context/AuthContext\";import dayjs from\"dayjs\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Agenda(){var _user$email;const{user}=useAuth();const[matches,setMatches]=useState([]);const[usersMap,setUsersMap]=useState({});useEffect(()=>{const fetchUsers=async()=>{const usersSnap=await getDocs(collection(db,\"users\"));const map={};usersSnap.forEach(doc=>{const data=doc.data();if(data.email){map[data.email.toLowerCase()]=data.firstName&&data.lastName?data.firstName+\" \"+data.lastName:data.email;}});setUsersMap(map);};const fetchMatches=async()=>{const q=query(collection(db,\"matches\"),orderBy(\"date\"),orderBy(\"time\"));const snapshot=await getDocs(q);const result=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setMatches(result);};fetchUsers();fetchMatches();},[]);const userEmail=user===null||user===void 0?void 0:(_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.toLowerCase();const relevantMatches=matches.filter(m=>{var _m$team,_m$team2,_m$umpire;return((_m$team=m.team1)===null||_m$team===void 0?void 0:_m$team.toLowerCase())===userEmail||((_m$team2=m.team2)===null||_m$team2===void 0?void 0:_m$team2.toLowerCase())===userEmail||((_m$umpire=m.umpire)===null||_m$umpire===void 0?void 0:_m$umpire.toLowerCase())===userEmail;});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-w-3xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-4 text-black dark:text-white\",children:\"Your Match Agenda\"}),relevantMatches.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300\",children:\"No matches found for your email.\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-4\",children:relevantMatches.map(match=>{var _match$team,_match$team2,_match$umpire;return/*#__PURE__*/_jsxs(\"li\",{className:\"border rounded p-4 bg-white dark:bg-gray-700 shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-md font-semibold dark:text-white\",children:[dayjs(match.date).format(\"dddd, MMM D\"),\" at \",match.time]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Division:\"}),\" \",match.division,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Teams:\"}),\" \",usersMap[(_match$team=match.team1)===null||_match$team===void 0?void 0:_match$team.toLowerCase()]||match.team1,\" vs \",usersMap[(_match$team2=match.team2)===null||_match$team2===void 0?void 0:_match$team2.toLowerCase()]||match.team2,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Umpire:\"}),\" \",usersMap[(_match$umpire=match.umpire)===null||_match$umpire===void 0?void 0:_match$umpire.toLowerCase()]||match.umpire,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Venue:\"}),\" \",match.venue]})]},match.id);})})]});}","map":{"version":3,"names":["useEffect","useState","collection","getDocs","query","orderBy","db","useAuth","dayjs","jsx","_jsx","jsxs","_jsxs","Agenda","_user$email","user","matches","setMatches","usersMap","setUsersMap","fetchUsers","usersSnap","map","forEach","doc","data","email","toLowerCase","firstName","lastName","fetchMatches","q","snapshot","result","docs","id","userEmail","relevantMatches","filter","m","_m$team","_m$team2","_m$umpire","team1","team2","umpire","className","children","length","match","_match$team","_match$team2","_match$umpire","date","format","time","division","venue"],"sources":["/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/Agenda.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { collection, getDocs, query, orderBy } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../context/AuthContext\";\nimport dayjs from \"dayjs\";\n\nexport default function Agenda() {\n  const { user } = useAuth();\n  const [matches, setMatches] = useState([]);\n  const [usersMap, setUsersMap] = useState({});\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const usersSnap = await getDocs(collection(db, \"users\"));\n      const map = {};\n      usersSnap.forEach(doc => {\n        const data = doc.data();\n        if (data.email) {\n          map[data.email.toLowerCase()] = data.firstName && data.lastName\n            ? data.firstName + \" \" + data.lastName\n            : data.email;\n        }\n      });\n      setUsersMap(map);\n    };\n\n    const fetchMatches = async () => {\n      const q = query(collection(db, \"matches\"), orderBy(\"date\"), orderBy(\"time\"));\n      const snapshot = await getDocs(q);\n      const result = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setMatches(result);\n    };\n\n    fetchUsers();\n    fetchMatches();\n  }, []);\n\n  const userEmail = user?.email?.toLowerCase();\n\n  const relevantMatches = matches.filter(\n    m =>\n      m.team1?.toLowerCase() === userEmail ||\n      m.team2?.toLowerCase() === userEmail ||\n      m.umpire?.toLowerCase() === userEmail\n  );\n\n  return (\n    <div className=\"p-4 max-w-3xl mx-auto\">\n      <h1 className=\"text-xl font-bold mb-4 text-black dark:text-white\">Your Match Agenda</h1>\n      {relevantMatches.length === 0 && (\n        <p className=\"text-gray-700 dark:text-gray-300\">No matches found for your email.</p>\n      )}\n      <ul className=\"space-y-4\">\n        {relevantMatches.map(match => (\n          <li key={match.id} className=\"border rounded p-4 bg-white dark:bg-gray-700 shadow\">\n            <div className=\"text-md font-semibold dark:text-white\">\n              {dayjs(match.date).format(\"dddd, MMM D\")} at {match.time}\n            </div>\n            <div className=\"text-sm dark:text-gray-300\">\n              <strong>Division:</strong> {match.division}<br />\n              <strong>Teams:</strong> {usersMap[match.team1?.toLowerCase()] || match.team1} vs {usersMap[match.team2?.toLowerCase()] || match.team2}<br />\n              <strong>Umpire:</strong> {usersMap[match.umpire?.toLowerCase()] || match.umpire}<br />\n              <strong>Venue:</strong> {match.venue}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}