{"ast":null,"code":"import{useEffect,useState}from\"react\";import{collection,getDocs,query,where}from\"firebase/firestore\";import{db}from\"../firebase\";import dayjs from\"dayjs\";import TournamentSelector from\"../components/TournamentSelector\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UmpireAppointments(){const[matches,setMatches]=useState([]);const[selectedDate,setSelectedDate]=useState(dayjs().format(\"YYYY-MM-DD\"));const[viewMode,setViewMode]=useState(\"day\");// or \"tournament\"\nconst[tournamentId,setTournamentId]=useState(null);useEffect(()=>{if(!tournamentId)return;const fetchMatches=async()=>{const matchesRef=collection(db,`tournaments/${tournamentId}/matches`);const q=viewMode===\"day\"?query(matchesRef,where(\"date\",\"==\",selectedDate)):matchesRef;const snapshot=await getDocs(q);const data=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setMatches(data);};fetchMatches();},[selectedDate,viewMode,tournamentId]);const times=[...new Set(matches.map(match=>match.time))].sort();const courts=[\"Court 1\",\"Court 2\",\"Court 3\",\"Court 4\"];const matchesByTimeAndCourt=times.map(time=>{const matchesAtTime=matches.filter(match=>match.time===time);const courtMap={};courts.forEach(court=>{courtMap[court]=matchesAtTime.find(match=>match.court===court);});return{time,courtMap};});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-gray-900 dark:text-gray-100\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Umpire Appointments\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 mb-4 items-center\",children:[/*#__PURE__*/_jsx(TournamentSelector,{onSelect:setTournamentId}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:viewMode,onChange:e=>setViewMode(e.target.value),className:\"border px-2 py-1 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"day\",children:\"Day View\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tournament\",children:\"Tournament View\"})]})]}),matchesByTimeAndCourt.map(_ref=>{let{time,courtMap}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-2\",children:time}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-4\",children:courts.map(court=>{const match=courtMap[court];return match?/*#__PURE__*/_jsxs(\"div\",{className:\"border p-2 rounded shadow bg-white dark:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold\",children:court}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:match.type}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[match.team1,\" vs \",match.team2]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm italic\",children:[\"Umpire: \",match.umpireName||match.umpireEmail]})]},court):/*#__PURE__*/_jsx(\"div\",{className:\"border p-2 rounded shadow bg-white dark:bg-gray-700 text-sm italic text-gray-500\",children:\"No Match Scheduled\"},court);})})]},time);})]});}","map":{"version":3,"names":["useEffect","useState","collection","getDocs","query","where","db","dayjs","TournamentSelector","jsx","_jsx","jsxs","_jsxs","UmpireAppointments","matches","setMatches","selectedDate","setSelectedDate","format","viewMode","setViewMode","tournamentId","setTournamentId","fetchMatches","matchesRef","q","snapshot","data","docs","map","doc","id","times","Set","match","time","sort","courts","matchesByTimeAndCourt","matchesAtTime","filter","courtMap","forEach","court","find","className","children","onSelect","type","value","onChange","e","target","_ref","team1","team2","umpireName","umpireEmail"],"sources":["/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/UmpireAppointments.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport dayjs from \"dayjs\";\nimport TournamentSelector from \"../components/TournamentSelector\";\n\nexport default function UmpireAppointments() {\n  const [matches, setMatches] = useState([]);\n  const [selectedDate, setSelectedDate] = useState(dayjs().format(\"YYYY-MM-DD\"));\n  const [viewMode, setViewMode] = useState(\"day\"); // or \"tournament\"\n  const [tournamentId, setTournamentId] = useState(null);\n\n  useEffect(() => {\n    if (!tournamentId) return;\n    const fetchMatches = async () => {\n      const matchesRef = collection(db, `tournaments/${tournamentId}/matches`);\n      const q = viewMode === \"day\"\n        ? query(matchesRef, where(\"date\", \"==\", selectedDate))\n        : matchesRef;\n\n      const snapshot = await getDocs(q);\n      const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setMatches(data);\n    };\n    fetchMatches();\n  }, [selectedDate, viewMode, tournamentId]);\n\n  const times = [...new Set(matches.map(match => match.time))].sort();\n  const courts = [\"Court 1\", \"Court 2\", \"Court 3\", \"Court 4\"];\n\n  const matchesByTimeAndCourt = times.map(time => {\n    const matchesAtTime = matches.filter(match => match.time === time);\n    const courtMap = {};\n    courts.forEach(court => {\n      courtMap[court] = matchesAtTime.find(match => match.court === court);\n    });\n    return { time, courtMap };\n  });\n\n  return (\n    <div className=\"p-4 text-gray-900 dark:text-gray-100\">\n      <h1 className=\"text-2xl font-bold mb-4\">Umpire Appointments</h1>\n\n      <div className=\"flex flex-wrap gap-4 mb-4 items-center\">\n        <TournamentSelector onSelect={setTournamentId} />\n\n        <input\n          type=\"date\"\n          value={selectedDate}\n          onChange={(e) => setSelectedDate(e.target.value)}\n          className=\"border px-2 py-1 rounded\"\n        />\n\n        <select\n          value={viewMode}\n          onChange={(e) => setViewMode(e.target.value)}\n          className=\"border px-2 py-1 rounded\"\n        >\n          <option value=\"day\">Day View</option>\n          <option value=\"tournament\">Tournament View</option>\n        </select>\n      </div>\n\n      {matchesByTimeAndCourt.map(({ time, courtMap }) => (\n        <div key={time} className=\"mb-6\">\n          <h2 className=\"text-lg font-semibold mb-2\">{time}</h2>\n          <div className=\"grid grid-cols-4 gap-4\">\n            {courts.map(court => {\n              const match = courtMap[court];\n              return match ? (\n                <div key={court} className=\"border p-2 rounded shadow bg-white dark:bg-gray-700\">\n                  <p className=\"text-sm font-semibold\">{court}</p>\n                  <p className=\"text-sm\">{match.type}</p>\n                  <p className=\"text-sm\">{match.team1} vs {match.team2}</p>\n                  <p className=\"text-sm italic\">Umpire: {match.umpireName || match.umpireEmail}</p>\n                </div>\n              ) : (\n                <div key={court} className=\"border p-2 rounded shadow bg-white dark:bg-gray-700 text-sm italic text-gray-500\">\n                  No Match Scheduled\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,UAAU,CAAEC,OAAO,CAAEC,KAAK,CAAEC,KAAK,KAAQ,oBAAoB,CACtE,OAASC,EAAE,KAAQ,aAAa,CAChC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,kBAAkB,KAAM,kCAAkC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElE,cAAe,SAAS,CAAAC,kBAAkBA,CAAA,CAAG,CAC3C,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACe,YAAY,CAAEC,eAAe,CAAC,CAAGhB,QAAQ,CAACM,KAAK,CAAC,CAAC,CAACW,MAAM,CAAC,YAAY,CAAC,CAAC,CAC9E,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAAE;AACjD,KAAM,CAACoB,YAAY,CAAEC,eAAe,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAEtDD,SAAS,CAAC,IAAM,CACd,GAAI,CAACqB,YAAY,CAAE,OACnB,KAAM,CAAAE,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,UAAU,CAAGtB,UAAU,CAACI,EAAE,CAAE,eAAee,YAAY,UAAU,CAAC,CACxE,KAAM,CAAAI,CAAC,CAAGN,QAAQ,GAAK,KAAK,CACxBf,KAAK,CAACoB,UAAU,CAAEnB,KAAK,CAAC,MAAM,CAAE,IAAI,CAAEW,YAAY,CAAC,CAAC,CACpDQ,UAAU,CAEd,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAvB,OAAO,CAACsB,CAAC,CAAC,CACjC,KAAM,CAAAE,IAAI,CAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAACC,GAAG,GAAK,CAAEC,EAAE,CAAED,GAAG,CAACC,EAAE,CAAE,GAAGD,GAAG,CAACH,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CACtEZ,UAAU,CAACY,IAAI,CAAC,CAClB,CAAC,CACDJ,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACP,YAAY,CAAEG,QAAQ,CAAEE,YAAY,CAAC,CAAC,CAE1C,KAAM,CAAAW,KAAK,CAAG,CAAC,GAAG,GAAI,CAAAC,GAAG,CAACnB,OAAO,CAACe,GAAG,CAACK,KAAK,EAAIA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CACnE,KAAM,CAAAC,MAAM,CAAG,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAC,CAE3D,KAAM,CAAAC,qBAAqB,CAAGN,KAAK,CAACH,GAAG,CAACM,IAAI,EAAI,CAC9C,KAAM,CAAAI,aAAa,CAAGzB,OAAO,CAAC0B,MAAM,CAACN,KAAK,EAAIA,KAAK,CAACC,IAAI,GAAKA,IAAI,CAAC,CAClE,KAAM,CAAAM,QAAQ,CAAG,CAAC,CAAC,CACnBJ,MAAM,CAACK,OAAO,CAACC,KAAK,EAAI,CACtBF,QAAQ,CAACE,KAAK,CAAC,CAAGJ,aAAa,CAACK,IAAI,CAACV,KAAK,EAAIA,KAAK,CAACS,KAAK,GAAKA,KAAK,CAAC,CACtE,CAAC,CAAC,CACF,MAAO,CAAER,IAAI,CAAEM,QAAS,CAAC,CAC3B,CAAC,CAAC,CAEF,mBACE7B,KAAA,QAAKiC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eACnDpC,IAAA,OAAImC,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAEhElC,KAAA,QAAKiC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDpC,IAAA,CAACF,kBAAkB,EAACuC,QAAQ,CAAEzB,eAAgB,CAAE,CAAC,cAEjDZ,IAAA,UACEsC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEjC,YAAa,CACpBkC,QAAQ,CAAGC,CAAC,EAAKlC,eAAe,CAACkC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACjDJ,SAAS,CAAC,0BAA0B,CACrC,CAAC,cAEFjC,KAAA,WACEqC,KAAK,CAAE9B,QAAS,CAChB+B,QAAQ,CAAGC,CAAC,EAAK/B,WAAW,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7CJ,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eAEpCpC,IAAA,WAAQuC,KAAK,CAAC,KAAK,CAAAH,QAAA,CAAC,UAAQ,CAAQ,CAAC,cACrCpC,IAAA,WAAQuC,KAAK,CAAC,YAAY,CAAAH,QAAA,CAAC,iBAAe,CAAQ,CAAC,EAC7C,CAAC,EACN,CAAC,CAELR,qBAAqB,CAACT,GAAG,CAACwB,IAAA,MAAC,CAAElB,IAAI,CAAEM,QAAS,CAAC,CAAAY,IAAA,oBAC5CzC,KAAA,QAAgBiC,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC9BpC,IAAA,OAAImC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAEX,IAAI,CAAK,CAAC,cACtDzB,IAAA,QAAKmC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpCT,MAAM,CAACR,GAAG,CAACc,KAAK,EAAI,CACnB,KAAM,CAAAT,KAAK,CAAGO,QAAQ,CAACE,KAAK,CAAC,CAC7B,MAAO,CAAAT,KAAK,cACVtB,KAAA,QAAiBiC,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAC9EpC,IAAA,MAAGmC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEH,KAAK,CAAI,CAAC,cAChDjC,IAAA,MAAGmC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEZ,KAAK,CAACc,IAAI,CAAI,CAAC,cACvCpC,KAAA,MAAGiC,SAAS,CAAC,SAAS,CAAAC,QAAA,EAAEZ,KAAK,CAACoB,KAAK,CAAC,MAAI,CAACpB,KAAK,CAACqB,KAAK,EAAI,CAAC,cACzD3C,KAAA,MAAGiC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAAC,UAAQ,CAACZ,KAAK,CAACsB,UAAU,EAAItB,KAAK,CAACuB,WAAW,EAAI,CAAC,GAJzEd,KAKL,CAAC,cAENjC,IAAA,QAAiBmC,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,oBAE9G,EAFUH,KAEL,CACN,CACH,CAAC,CAAC,CACC,CAAC,GAlBER,IAmBL,CAAC,EACP,CAAC,EACC,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}