{"ast":null,"code":"// src/pages/TournamentSettings.jsx\nimport{useEffect,useState}from\"react\";import{db}from\"../firebase\";import{collection,addDoc,getDocs,updateDoc,doc,query,where}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TournamentSettings(){const[name,setName]=useState(\"\");const[tournaments,setTournaments]=useState([]);const[activeId,setActiveId]=useState(null);useEffect(()=>{fetchTournaments();},[]);const fetchTournaments=async()=>{const snapshot=await getDocs(collection(db,\"tournaments\"));const all=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setTournaments(all);const active=all.find(t=>t.isActive);if(active)setActiveId(active.id);};const handleCreate=async()=>{if(!name.trim())return;const docRef=await addDoc(collection(db,\"tournaments\"),{name,isActive:false,createdAt:new Date()});setName(\"\");fetchTournaments();};const setActiveTournament=async id=>{const snapshot=await getDocs(collection(db,\"tournaments\"));const updates=snapshot.docs.map(docRef=>updateDoc(doc(db,\"tournaments\",docRef.id),{isActive:docRef.id===id}));await Promise.all(updates);setActiveId(id);fetchTournaments();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Tournament Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Tournament name\",className:\"border p-2 mr-2 bg-white dark:bg-gray-800 text-black dark:text-white\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreate,className:\"bg-green-600 text-white px-4 py-2 rounded\",children:\"Create Tournament\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:\"Existing Tournaments\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:tournaments.map(t=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center bg-white dark:bg-gray-700 p-2 rounded\",children:[/*#__PURE__*/_jsx(\"span\",{children:t.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTournament(t.id),className:`px-3 py-1 rounded ${t.id===activeId?\"bg-blue-500 text-white\":\"bg-gray-300 dark:bg-gray-600\"}`,children:t.id===activeId?\"Active\":\"Set Active\"})]},t.id))})]});}","map":{"version":3,"names":["useEffect","useState","db","collection","addDoc","getDocs","updateDoc","doc","query","where","jsx","_jsx","jsxs","_jsxs","TournamentSettings","name","setName","tournaments","setTournaments","activeId","setActiveId","fetchTournaments","snapshot","all","docs","map","id","data","active","find","t","isActive","handleCreate","trim","docRef","createdAt","Date","setActiveTournament","updates","Promise","className","children","type","placeholder","value","onChange","e","target","onClick"],"sources":["/Users/andrewhall-villiers/Downloads/Match Report/match-report-app-final-complete/src/pages/TournamentSettings.jsx"],"sourcesContent":["// src/pages/TournamentSettings.jsx\n\nimport { useEffect, useState } from \"react\";\nimport { db } from \"../firebase\";\nimport {\n  collection,\n  addDoc,\n  getDocs,\n  updateDoc,\n  doc,\n  query,\n  where\n} from \"firebase/firestore\";\n\nexport default function TournamentSettings() {\n  const [name, setName] = useState(\"\");\n  const [tournaments, setTournaments] = useState([]);\n  const [activeId, setActiveId] = useState(null);\n\n  useEffect(() => {\n    fetchTournaments();\n  }, []);\n\n  const fetchTournaments = async () => {\n    const snapshot = await getDocs(collection(db, \"tournaments\"));\n    const all = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n    setTournaments(all);\n    const active = all.find(t => t.isActive);\n    if (active) setActiveId(active.id);\n  };\n\n  const handleCreate = async () => {\n    if (!name.trim()) return;\n    const docRef = await addDoc(collection(db, \"tournaments\"), {\n      name,\n      isActive: false,\n      createdAt: new Date()\n    });\n    setName(\"\");\n    fetchTournaments();\n  };\n\n  const setActiveTournament = async (id) => {\n    const snapshot = await getDocs(collection(db, \"tournaments\"));\n    const updates = snapshot.docs.map(docRef =>\n      updateDoc(doc(db, \"tournaments\", docRef.id), {\n        isActive: docRef.id === id\n      })\n    );\n    await Promise.all(updates);\n    setActiveId(id);\n    fetchTournaments();\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h2 className=\"text-xl font-bold mb-4\">Tournament Settings</h2>\n\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          placeholder=\"Tournament name\"\n          className=\"border p-2 mr-2 bg-white dark:bg-gray-800 text-black dark:text-white\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n        />\n        <button onClick={handleCreate} className=\"bg-green-600 text-white px-4 py-2 rounded\">\n          Create Tournament\n        </button>\n      </div>\n\n      <h3 className=\"text-lg font-semibold mb-2\">Existing Tournaments</h3>\n      <ul className=\"space-y-2\">\n        {tournaments.map(t => (\n          <li key={t.id} className=\"flex justify-between items-center bg-white dark:bg-gray-700 p-2 rounded\">\n            <span>{t.name}</span>\n            <button\n              onClick={() => setActiveTournament(t.id)}\n              className={`px-3 py-1 rounded ${t.id === activeId ? \"bg-blue-500 text-white\" : \"bg-gray-300 dark:bg-gray-600\"}`}\n            >\n              {t.id === activeId ? \"Active\" : \"Set Active\"}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}