{"ast":null,"code":"// src/context/TournamentContext.js\nimport{createContext,useContext,useState,useEffect}from\"react\";import{db}from\"../firebase\";import{collection,query,orderBy,onSnapshot}from\"firebase/firestore\";// 1. Create the Context\nimport{jsx as _jsx}from\"react/jsx-runtime\";export const TournamentContext=/*#__PURE__*/createContext();// 2. Provider Component\nexport function TournamentProvider(_ref){let{children}=_ref;const[tournaments,setTournaments]=useState([]);const[currentTournament,setCurrentTournament]=useState(null);useEffect(()=>{// Listen to ALL tournaments, ordered by name\nconst q=query(collection(db,\"tournaments\"),orderBy(\"name\"));const unsubscribe=onSnapshot(q,snapshot=>{const all=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setTournaments(all);// If none selected yet, pick the one marked active: true (or fallback to first)\nif(!currentTournament&&all.length){const activeOne=all.find(t=>t.active===true);setCurrentTournament(activeOne||all[0]);}});return unsubscribe;},[currentTournament]);return/*#__PURE__*/_jsx(TournamentContext.Provider,{value:{tournaments,currentTournament,setCurrentTournament},children:children});}// 3. Custom hook for easy consumption\nexport function useTournament(){const ctx=useContext(TournamentContext);if(!ctx){throw new Error(\"useTournament must be used within a TournamentProvider\");}return ctx;}","map":{"version":3,"names":["createContext","useContext","useState","useEffect","db","collection","query","orderBy","onSnapshot","jsx","_jsx","TournamentContext","TournamentProvider","_ref","children","tournaments","setTournaments","currentTournament","setCurrentTournament","q","unsubscribe","snapshot","all","docs","map","doc","id","data","length","activeOne","find","t","active","Provider","value","useTournament","ctx","Error"],"sources":["/Users/andrewhall-villiers/Downloads/Match Report/match-report-app-final-complete/src/context/TournamentContext.js"],"sourcesContent":["// src/context/TournamentContext.js\n\nimport { createContext, useContext, useState, useEffect } from \"react\";\nimport { db } from \"../firebase\";\nimport { collection, query, orderBy, onSnapshot } from \"firebase/firestore\";\n\n// 1. Create the Context\nexport const TournamentContext = createContext();\n\n// 2. Provider Component\nexport function TournamentProvider({ children }) {\n  const [tournaments, setTournaments] = useState([]);\n  const [currentTournament, setCurrentTournament] = useState(null);\n\n  useEffect(() => {\n    // Listen to ALL tournaments, ordered by name\n    const q = query(collection(db, \"tournaments\"), orderBy(\"name\"));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const all = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      setTournaments(all);\n\n      // If none selected yet, pick the one marked active: true (or fallback to first)\n      if (!currentTournament && all.length) {\n        const activeOne = all.find((t) => t.active === true);\n        setCurrentTournament(activeOne || all[0]);\n      }\n    });\n\n    return unsubscribe;\n  }, [currentTournament]);\n\n  return (\n    <TournamentContext.Provider\n      value={{ tournaments, currentTournament, setCurrentTournament }}\n    >\n      {children}\n    </TournamentContext.Provider>\n  );\n}\n\n// 3. Custom hook for easy consumption\nexport function useTournament() {\n  const ctx = useContext(TournamentContext);\n  if (!ctx) {\n    throw new Error(\n      \"useTournament must be used within a TournamentProvider\"\n    );\n  }\n  return ctx;\n}"],"mappings":"AAAA;AAEA,OAASA,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACtE,OAASC,EAAE,KAAQ,aAAa,CAChC,OAASC,UAAU,CAAEC,KAAK,CAAEC,OAAO,CAAEC,UAAU,KAAQ,oBAAoB,CAE3E;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,MAAO,MAAM,CAAAC,iBAAiB,cAAGX,aAAa,CAAC,CAAC,CAEhD;AACA,MAAO,SAAS,CAAAY,kBAAkBA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC7C,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACe,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAEhEC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAgB,CAAC,CAAGb,KAAK,CAACD,UAAU,CAACD,EAAE,CAAE,aAAa,CAAC,CAAEG,OAAO,CAAC,MAAM,CAAC,CAAC,CAC/D,KAAM,CAAAa,WAAW,CAAGZ,UAAU,CAACW,CAAC,CAAGE,QAAQ,EAAK,CAC9C,KAAM,CAAAC,GAAG,CAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAEC,GAAG,GAAM,CACtCC,EAAE,CAAED,GAAG,CAACC,EAAE,CACV,GAAGD,GAAG,CAACE,IAAI,CAAC,CACd,CAAC,CAAC,CAAC,CACHX,cAAc,CAACM,GAAG,CAAC,CAEnB;AACA,GAAI,CAACL,iBAAiB,EAAIK,GAAG,CAACM,MAAM,CAAE,CACpC,KAAM,CAAAC,SAAS,CAAGP,GAAG,CAACQ,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,MAAM,GAAK,IAAI,CAAC,CACpDd,oBAAoB,CAACW,SAAS,EAAIP,GAAG,CAAC,CAAC,CAAC,CAAC,CAC3C,CACF,CAAC,CAAC,CAEF,MAAO,CAAAF,WAAW,CACpB,CAAC,CAAE,CAACH,iBAAiB,CAAC,CAAC,CAEvB,mBACEP,IAAA,CAACC,iBAAiB,CAACsB,QAAQ,EACzBC,KAAK,CAAE,CAAEnB,WAAW,CAAEE,iBAAiB,CAAEC,oBAAqB,CAAE,CAAAJ,QAAA,CAE/DA,QAAQ,CACiB,CAAC,CAEjC,CAEA;AACA,MAAO,SAAS,CAAAqB,aAAaA,CAAA,CAAG,CAC9B,KAAM,CAAAC,GAAG,CAAGnC,UAAU,CAACU,iBAAiB,CAAC,CACzC,GAAI,CAACyB,GAAG,CAAE,CACR,KAAM,IAAI,CAAAC,KAAK,CACb,wDACF,CAAC,CACH,CACA,MAAO,CAAAD,GAAG,CACZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}