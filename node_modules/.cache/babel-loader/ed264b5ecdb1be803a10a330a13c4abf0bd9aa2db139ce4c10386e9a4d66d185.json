{"ast":null,"code":"var _jsxFileName = \"/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/Agenda.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { collection, getDocs, query, orderBy } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../context/AuthContext\";\nimport dayjs from \"dayjs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Agenda() {\n  _s();\n  var _user$email;\n  const {\n    user\n  } = useAuth();\n  const [matches, setMatches] = useState([]);\n  const [usersMap, setUsersMap] = useState({});\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const usersSnap = await getDocs(collection(db, \"users\"));\n      const map = {};\n      usersSnap.forEach(doc => {\n        const data = doc.data();\n        if (data.email) {\n          map[data.email.toLowerCase()] = data.firstName && data.lastName ? data.firstName + \" \" + data.lastName : data.email;\n        }\n      });\n      setUsersMap(map);\n    };\n    const fetchMatches = async () => {\n      const q = query(collection(db, \"matches\"), orderBy(\"date\"), orderBy(\"time\"));\n      const snapshot = await getDocs(q);\n      const result = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setMatches(result);\n    };\n    fetchUsers();\n    fetchMatches();\n  }, []);\n  const userEmail = user === null || user === void 0 ? void 0 : (_user$email = user.email) === null || _user$email === void 0 ? void 0 : _user$email.toLowerCase();\n  const relevantMatches = matches.filter(m => {\n    var _m$team, _m$team2, _m$umpire;\n    return ((_m$team = m.team1) === null || _m$team === void 0 ? void 0 : _m$team.toLowerCase()) === userEmail || ((_m$team2 = m.team2) === null || _m$team2 === void 0 ? void 0 : _m$team2.toLowerCase()) === userEmail || ((_m$umpire = m.umpire) === null || _m$umpire === void 0 ? void 0 : _m$umpire.toLowerCase()) === userEmail;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 max-w-3xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-xl font-bold mb-4 text-black dark:text-white\",\n      children: \"Your Match Agenda\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), relevantMatches.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 dark:text-gray-300\",\n      children: \"No matches found for your email.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"space-y-4\",\n      children: relevantMatches.map(match => {\n        var _match$team, _match$team2, _match$umpire;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"border rounded p-4 bg-white dark:bg-gray-700 shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-md font-semibold dark:text-white\",\n            children: [dayjs(match.date).format(\"dddd, MMM D\"), \" at \", match.time]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm dark:text-gray-300\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Division:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 15\n            }, this), \" \", match.division, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 58\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Teams:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this), \" \", usersMap[(_match$team = match.team1) === null || _match$team === void 0 ? void 0 : _match$team.toLowerCase()] || match.team1, \" vs \", usersMap[(_match$team2 = match.team2) === null || _match$team2 === void 0 ? void 0 : _match$team2.toLowerCase()] || match.team2, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 149\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Umpire:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }, this), \" \", usersMap[(_match$umpire = match.umpire) === null || _match$umpire === void 0 ? void 0 : _match$umpire.toLowerCase()] || match.umpire, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 95\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Venue:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this), \" \", match.venue]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)]\n        }, match.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(Agenda, \"5nrDYtisgO5d8IZLMGhMZnr3q/M=\", false, function () {\n  return [useAuth];\n});\n_c = Agenda;\nvar _c;\n$RefreshReg$(_c, \"Agenda\");","map":{"version":3,"names":["useEffect","useState","collection","getDocs","query","orderBy","db","useAuth","dayjs","jsxDEV","_jsxDEV","Agenda","_s","_user$email","user","matches","setMatches","usersMap","setUsersMap","fetchUsers","usersSnap","map","forEach","doc","data","email","toLowerCase","firstName","lastName","fetchMatches","q","snapshot","result","docs","id","userEmail","relevantMatches","filter","m","_m$team","_m$team2","_m$umpire","team1","team2","umpire","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","match","_match$team","_match$team2","_match$umpire","date","format","time","division","venue","_c","$RefreshReg$"],"sources":["/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/Agenda.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { collection, getDocs, query, orderBy } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../context/AuthContext\";\nimport dayjs from \"dayjs\";\n\nexport default function Agenda() {\n  const { user } = useAuth();\n  const [matches, setMatches] = useState([]);\n  const [usersMap, setUsersMap] = useState({});\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const usersSnap = await getDocs(collection(db, \"users\"));\n      const map = {};\n      usersSnap.forEach(doc => {\n        const data = doc.data();\n        if (data.email) {\n          map[data.email.toLowerCase()] = data.firstName && data.lastName\n            ? data.firstName + \" \" + data.lastName\n            : data.email;\n        }\n      });\n      setUsersMap(map);\n    };\n\n    const fetchMatches = async () => {\n      const q = query(collection(db, \"matches\"), orderBy(\"date\"), orderBy(\"time\"));\n      const snapshot = await getDocs(q);\n      const result = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setMatches(result);\n    };\n\n    fetchUsers();\n    fetchMatches();\n  }, []);\n\n  const userEmail = user?.email?.toLowerCase();\n\n  const relevantMatches = matches.filter(\n    m =>\n      m.team1?.toLowerCase() === userEmail ||\n      m.team2?.toLowerCase() === userEmail ||\n      m.umpire?.toLowerCase() === userEmail\n  );\n\n  return (\n    <div className=\"p-4 max-w-3xl mx-auto\">\n      <h1 className=\"text-xl font-bold mb-4 text-black dark:text-white\">Your Match Agenda</h1>\n      {relevantMatches.length === 0 && (\n        <p className=\"text-gray-700 dark:text-gray-300\">No matches found for your email.</p>\n      )}\n      <ul className=\"space-y-4\">\n        {relevantMatches.map(match => (\n          <li key={match.id} className=\"border rounded p-4 bg-white dark:bg-gray-700 shadow\">\n            <div className=\"text-md font-semibold dark:text-white\">\n              {dayjs(match.date).format(\"dddd, MMM D\")} at {match.time}\n            </div>\n            <div className=\"text-sm dark:text-gray-300\">\n              <strong>Division:</strong> {match.division}<br />\n              <strong>Teams:</strong> {usersMap[match.team1?.toLowerCase()] || match.team1} vs {usersMap[match.team2?.toLowerCase()] || match.team2}<br />\n              <strong>Umpire:</strong> {usersMap[match.umpire?.toLowerCase()] || match.umpire}<br />\n              <strong>Venue:</strong> {match.venue}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}