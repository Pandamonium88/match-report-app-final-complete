{"ast":null,"code":"// ProtectedRoute.jsx\nimport{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import LoadingSpinner from'./LoadingSpinner';// Add a proper loading component\nimport{jsx as _jsx}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{children,requireAdmin=false}=_ref;const{user,role,loading}=useAuth();const location=useLocation();if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});if(!user)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});if(requireAdmin&&role!=='admin')return/*#__PURE__*/_jsx(Navigate,{to:\"/unauthorized\",replace:true});if(!requireAdmin&&role==='unassigned')return/*#__PURE__*/_jsx(Navigate,{to:\"/profile-setup\",replace:true});// New route for unassigned users\nreturn children;}","map":{"version":3,"names":["Navigate","useLocation","useAuth","LoadingSpinner","jsx","_jsx","ProtectedRoute","_ref","children","requireAdmin","user","role","loading","location","to","state","from","replace"],"sources":["/Users/andrewhall-villiers/Downloads/Match Report/match-report-app-final-complete/src/components/ProtectedRoute.jsx"],"sourcesContent":["// ProtectedRoute.jsx\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport LoadingSpinner from './LoadingSpinner'; // Add a proper loading component\n\nexport default function ProtectedRoute({ children, requireAdmin = false }) {\n  const { user, role, loading } = useAuth();\n  const location = useLocation();\n\n  if (loading) return <LoadingSpinner />;\n\n  if (!user) \n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  \n  if (requireAdmin && role !== 'admin') \n    return <Navigate to=\"/unauthorized\" replace />;\n  \n  if (!requireAdmin && role === 'unassigned') \n    return <Navigate to=\"/profile-setup\" replace />; // New route for unassigned users\n\n  return children;\n}"],"mappings":"AAAA;AACA,OAASA,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAqC,IAApC,CAAEC,QAAQ,CAAEC,YAAY,CAAG,KAAM,CAAC,CAAAF,IAAA,CACvE,KAAM,CAAEG,IAAI,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGV,OAAO,CAAC,CAAC,CACzC,KAAM,CAAAW,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9B,GAAIW,OAAO,CAAE,mBAAOP,IAAA,CAACF,cAAc,GAAE,CAAC,CAEtC,GAAI,CAACO,IAAI,CACP,mBAAOL,IAAA,CAACL,QAAQ,EAACc,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEH,QAAS,CAAE,CAACI,OAAO,MAAE,CAAC,CAEpE,GAAIR,YAAY,EAAIE,IAAI,GAAK,OAAO,CAClC,mBAAON,IAAA,CAACL,QAAQ,EAACc,EAAE,CAAC,eAAe,CAACG,OAAO,MAAE,CAAC,CAEhD,GAAI,CAACR,YAAY,EAAIE,IAAI,GAAK,YAAY,CACxC,mBAAON,IAAA,CAACL,QAAQ,EAACc,EAAE,CAAC,gBAAgB,CAACG,OAAO,MAAE,CAAC,CAAE;AAEnD,MAAO,CAAAT,QAAQ,CACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}