{"ast":null,"code":"import{useEffect,useState}from\"react\";import{collection,getDocs,updateDoc,doc}from\"firebase/firestore\";import{db}from\"../firebase\";import{useAuth}from\"../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminUsers(){const{role:currentUserRole}=useAuth();const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const roles=[\"admin\",\"umpire\",\"team\",\"unassigned\"];useEffect(()=>{const fetchUsers=async()=>{const snap=await getDocs(collection(db,\"users\"));const list=snap.docs.map(doc=>({id:doc.id,...doc.data()}));setUsers(list);setLoading(false);};if(currentUserRole===\"admin\"){fetchUsers();}},[currentUserRole]);const handleRoleChange=async(userId,newRole)=>{const ref=doc(db,\"users\",userId);await updateDoc(ref,{role:newRole});setUsers(prev=>prev.map(u=>u.id===userId?{...u,role:newRole}:u));};if(currentUserRole!==\"admin\"){return/*#__PURE__*/_jsx(\"p\",{className:\"p-4\",children:\"Access denied.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Manage Users\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading users...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border border-gray-300 dark:border-gray-600 text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 dark:bg-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left\",children:\"First\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left\",children:\"Last\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left\",children:\"State\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left\",children:\"Position\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 text-left\",children:\"Role\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(u=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:u.firstName||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:u.lastName||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:u.email||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:u.phone||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:u.state||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:u.position||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:/*#__PURE__*/_jsx(\"select\",{value:u.role,onChange:e=>handleRoleChange(u.id,e.target.value),className:\"p-1 rounded border border-gray-300 dark:bg-gray-800 dark:text-white\",children:roles.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r},r))})})]},u.id))})]})})]});}","map":{"version":3,"names":["useEffect","useState","collection","getDocs","updateDoc","doc","db","useAuth","jsx","_jsx","jsxs","_jsxs","AdminUsers","role","currentUserRole","users","setUsers","loading","setLoading","roles","fetchUsers","snap","list","docs","map","id","data","handleRoleChange","userId","newRole","ref","prev","u","className","children","firstName","lastName","email","phone","state","position","value","onChange","e","target","r"],"sources":["/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/AdminUsers.jsx"],"sourcesContent":["\nimport { useEffect, useState } from \"react\";\nimport { collection, getDocs, updateDoc, doc } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../context/AuthContext\";\n\nexport default function AdminUsers() {\n  const { role: currentUserRole } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const roles = [\"admin\", \"umpire\", \"team\", \"unassigned\"];\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const snap = await getDocs(collection(db, \"users\"));\n      const list = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n      setUsers(list);\n      setLoading(false);\n    };\n\n    if (currentUserRole === \"admin\") {\n      fetchUsers();\n    }\n  }, [currentUserRole]);\n\n  const handleRoleChange = async (userId, newRole) => {\n    const ref = doc(db, \"users\", userId);\n    await updateDoc(ref, { role: newRole });\n    setUsers((prev) =>\n      prev.map((u) => (u.id === userId ? { ...u, role: newRole } : u))\n    );\n  };\n\n  if (currentUserRole !== \"admin\") {\n    return <p className=\"p-4\">Access denied.</p>;\n  }\n\n  return (\n    <div className=\"p-4 max-w-7xl mx-auto\">\n      <h2 className=\"text-xl font-bold mb-4\">Manage Users</h2>\n      {loading ? (\n        <p>Loading users...</p>\n      ) : (\n        <div className=\"overflow-auto\">\n          <table className=\"w-full border border-gray-300 dark:border-gray-600 text-sm\">\n            <thead className=\"bg-gray-100 dark:bg-gray-700\">\n              <tr>\n                <th className=\"p-2 text-left\">First</th>\n                <th className=\"p-2 text-left\">Last</th>\n                <th className=\"p-2 text-left\">Email</th>\n                <th className=\"p-2 text-left\">Phone</th>\n                <th className=\"p-2 text-left\">State</th>\n                <th className=\"p-2 text-left\">Position</th>\n                <th className=\"p-2 text-left\">Role</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((u) => (\n                <tr key={u.id} className=\"border-t border-gray-200 dark:border-gray-700\">\n                  <td className=\"p-2\">{u.firstName || \"-\"}</td>\n                  <td className=\"p-2\">{u.lastName || \"-\"}</td>\n                  <td className=\"p-2\">{u.email || \"-\"}</td>\n                  <td className=\"p-2\">{u.phone || \"-\"}</td>\n                  <td className=\"p-2\">{u.state || \"-\"}</td>\n                  <td className=\"p-2\">{u.position || \"-\"}</td>\n                  <td className=\"p-2\">\n                    <select\n                      value={u.role}\n                      onChange={(e) => handleRoleChange(u.id, e.target.value)}\n                      className=\"p-1 rounded border border-gray-300 dark:bg-gray-800 dark:text-white\"\n                    >\n                      {roles.map((r) => (\n                        <option key={r} value={r}>\n                          {r}\n                        </option>\n                      ))}\n                    </select>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}