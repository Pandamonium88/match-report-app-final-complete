{"ast":null,"code":"var _jsxFileName = \"/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/UploadDraw.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport Papa from \"papaparse\";\nimport { db } from \"../firebase\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UploadDraw() {\n  _s();\n  const {\n    role\n  } = useAuth();\n  const [file, setFile] = useState(null);\n  const [status, setStatus] = useState(\"\");\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n    setStatus(\"\");\n  };\n  const handleUpload = () => {\n    if (!file) {\n      setStatus(\"Please select a CSV file first.\");\n      return;\n    }\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: async results => {\n        const matches = results.data;\n        let successCount = 0;\n        for (let match of matches) {\n          if (match.date && match.time && match.team1 && match.team2 && match.umpire && match.venue) {\n            try {\n              await addDoc(collection(db, \"matches\"), {\n                date: match.date,\n                time: match.time,\n                division: match.division || \"\",\n                team1: match.team1,\n                team2: match.team2,\n                umpire: match.umpire,\n                venue: match.venue\n              });\n              successCount++;\n            } catch (error) {\n              console.error(\"Error uploading match:\", error);\n            }\n          }\n        }\n        setStatus(`${successCount} matches uploaded successfully.`);\n      },\n      error: err => {\n        setStatus(\"Error parsing CSV: \" + err.message);\n      }\n    });\n  };\n  if (role !== \"admin\") {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 text-red-500\",\n      children: \"Access denied. Admins only.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 max-w-lg mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-xl font-bold mb-4 text-black dark:text-white\",\n      children: \"Upload Match Draw\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".csv\",\n      onChange: handleFileChange,\n      className: \"mb-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      className: \"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), status && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-4 text-sm text-gray-700 dark:text-gray-300\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(UploadDraw, \"xSnYm0r8EInOrpD4YoquIX0TCLs=\", false, function () {\n  return [useAuth];\n});\n_c = UploadDraw;\nvar _c;\n$RefreshReg$(_c, \"UploadDraw\");","map":{"version":3,"names":["useState","Papa","db","collection","addDoc","useAuth","jsxDEV","_jsxDEV","UploadDraw","_s","role","file","setFile","status","setStatus","handleFileChange","e","target","files","handleUpload","parse","header","skipEmptyLines","complete","results","matches","data","successCount","match","date","time","team1","team2","umpire","venue","division","error","console","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","onClick","_c","$RefreshReg$"],"sources":["/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/UploadDraw.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport Papa from \"papaparse\";\nimport { db } from \"../firebase\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport { useAuth } from \"../context/AuthContext\";\n\nexport default function UploadDraw() {\n  const { role } = useAuth();\n  const [file, setFile] = useState(null);\n  const [status, setStatus] = useState(\"\");\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n    setStatus(\"\");\n  };\n\n  const handleUpload = () => {\n    if (!file) {\n      setStatus(\"Please select a CSV file first.\");\n      return;\n    }\n\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: async (results) => {\n        const matches = results.data;\n        let successCount = 0;\n\n        for (let match of matches) {\n          if (match.date && match.time && match.team1 && match.team2 && match.umpire && match.venue) {\n            try {\n              await addDoc(collection(db, \"matches\"), {\n                date: match.date,\n                time: match.time,\n                division: match.division || \"\",\n                team1: match.team1,\n                team2: match.team2,\n                umpire: match.umpire,\n                venue: match.venue\n              });\n              successCount++;\n            } catch (error) {\n              console.error(\"Error uploading match:\", error);\n            }\n          }\n        }\n\n        setStatus(`${successCount} matches uploaded successfully.`);\n      },\n      error: (err) => {\n        setStatus(\"Error parsing CSV: \" + err.message);\n      }\n    });\n  };\n\n  if (role !== \"admin\") {\n    return <div className=\"p-4 text-red-500\">Access denied. Admins only.</div>;\n  }\n\n  return (\n    <div className=\"p-4 max-w-lg mx-auto\">\n      <h1 className=\"text-xl font-bold mb-4 text-black dark:text-white\">Upload Match Draw</h1>\n      <input type=\"file\" accept=\".csv\" onChange={handleFileChange} className=\"mb-4\" />\n      <button\n        onClick={handleUpload}\n        className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\n      >\n        Upload\n      </button>\n      {status && <p className=\"mt-4 text-sm text-gray-700 dark:text-gray-300\">{status}</p>}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}