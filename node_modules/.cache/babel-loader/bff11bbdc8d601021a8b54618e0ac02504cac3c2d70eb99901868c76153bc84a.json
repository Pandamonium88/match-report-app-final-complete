{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{db,auth}from\"../firebase\";import{doc,getDoc,updateDoc}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyDetails(){const[formData,setFormData]=useState({firstName:\"\",lastName:\"\",phone:\"\",state:\"\",position:\"\"});const[loading,setLoading]=useState(true);const[message,setMessage]=useState(\"\");useEffect(()=>{const fetchData=async()=>{var _auth$currentUser;const uid=(_auth$currentUser=auth.currentUser)===null||_auth$currentUser===void 0?void 0:_auth$currentUser.uid;if(!uid)return;try{const docRef=doc(db,\"users\",uid);const docSnap=await getDoc(docRef);if(docSnap.exists()){setFormData(prev=>({...prev,...docSnap.data()}));}setLoading(false);}catch(error){console.error(\"Failed to load details:\",error);setLoading(false);}};fetchData();},[]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleSubmit=async e=>{var _auth$currentUser2;e.preventDefault();const uid=(_auth$currentUser2=auth.currentUser)===null||_auth$currentUser2===void 0?void 0:_auth$currentUser2.uid;if(!uid)return;try{await updateDoc(doc(db,\"users\",uid),formData);setMessage(\"Details updated successfully!\");}catch(error){console.error(\"Update failed:\",error);setMessage(\"Something went wrong. Try again.\");}};if(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"p-4\",children:\"Loading your details...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"My Details\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",placeholder:\"First Name\",value:formData.firstName,onChange:handleChange,className:\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",placeholder:\"Last Name\",value:formData.lastName,onChange:handleChange,className:\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",placeholder:\"Phone\",value:formData.phone,onChange:handleChange,className:\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"state\",value:formData.state,onChange:handleChange,className:\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select State\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NSW\",children:\"NSW\"}),/*#__PURE__*/_jsx(\"option\",{value:\"QLD\",children:\"QLD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VIC\",children:\"VIC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"WA\",children:\"WA\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SA\",children:\"SA\"}),/*#__PURE__*/_jsx(\"option\",{value:\"TAS\",children:\"TAS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NT\",children:\"NT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ACT\",children:\"ACT\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"position\",value:formData.position,onChange:handleChange,className:\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Position\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Umpire\",children:\"Umpire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Team Manager\",children:\"Team Manager\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Coach\",children:\"Coach\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600\",children:\"Update\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-sm mt-2 text-black dark:text-white\",children:message})]})]});}","map":{"version":3,"names":["React","useEffect","useState","db","auth","doc","getDoc","updateDoc","jsx","_jsx","jsxs","_jsxs","MyDetails","formData","setFormData","firstName","lastName","phone","state","position","loading","setLoading","message","setMessage","fetchData","_auth$currentUser","uid","currentUser","docRef","docSnap","exists","prev","data","error","console","handleChange","e","name","value","target","handleSubmit","_auth$currentUser2","preventDefault","className","children","onSubmit","placeholder","onChange","type"],"sources":["/Users/andrewhall-villiers/Downloads/match-report-app-final-complete/src/pages/MyDetails.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { db, auth } from \"../firebase\";\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\n\nexport default function MyDetails() {\n  const [formData, setFormData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    phone: \"\",\n    state: \"\",\n    position: \"\",\n  });\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const uid = auth.currentUser?.uid;\n      if (!uid) return;\n\n      try {\n        const docRef = doc(db, \"users\", uid);\n        const docSnap = await getDoc(docRef);\n        if (docSnap.exists()) {\n          setFormData((prev) => ({ ...prev, ...docSnap.data() }));\n        }\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Failed to load details:\", error);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const uid = auth.currentUser?.uid;\n    if (!uid) return;\n\n    try {\n      await updateDoc(doc(db, \"users\", uid), formData);\n      setMessage(\"Details updated successfully!\");\n    } catch (error) {\n      console.error(\"Update failed:\", error);\n      setMessage(\"Something went wrong. Try again.\");\n    }\n  };\n\n  if (loading) return <p className=\"p-4\">Loading your details...</p>;\n\n  return (\n    <div className=\"p-4 max-w-md mx-auto\">\n      <h2 className=\"text-xl font-bold mb-4\">My Details</h2>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input name=\"firstName\" placeholder=\"First Name\" value={formData.firstName} onChange={handleChange} className=\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\" />\n        <input name=\"lastName\" placeholder=\"Last Name\" value={formData.lastName} onChange={handleChange} className=\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\" />\n        <input name=\"phone\" placeholder=\"Phone\" value={formData.phone} onChange={handleChange} className=\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\" />\n\n        <select name=\"state\" value={formData.state} onChange={handleChange} className=\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\">\n          <option value=\"\">Select State</option>\n          <option value=\"NSW\">NSW</option>\n          <option value=\"QLD\">QLD</option>\n          <option value=\"VIC\">VIC</option>\n          <option value=\"WA\">WA</option>\n          <option value=\"SA\">SA</option>\n          <option value=\"TAS\">TAS</option>\n          <option value=\"NT\">NT</option>\n          <option value=\"ACT\">ACT</option>\n        </select>\n\n        <select name=\"position\" value={formData.position} onChange={handleChange} className=\"w-full p-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white\">\n          <option value=\"\">Select Position</option>\n          <option value=\"Umpire\">Umpire</option>\n          <option value=\"Team Manager\">Team Manager</option>\n          <option value=\"Coach\">Coach</option>\n          <option value=\"Other\">Other</option>\n        </select>\n\n        <button type=\"submit\" className=\"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600\">Update</button>\n        {message && <p className=\"text-center text-sm mt-2 text-black dark:text-white\">{message}</p>}\n      </form>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}