{"ast":null,"code":"var _jsxFileName = \"/Users/andrewhall-villiers/Downloads/Match Report/match-report-app-final-complete/src/pages/Agenda.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { collection, getDocs, query, orderBy } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../context/AuthContext\";\nimport dayjs from \"dayjs\";\nimport { useTournament } from '../context/TournamentContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Agenda() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    currentTournament\n  } = useTournament();\n  const [matches, setMatches] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchMatches = async () => {\n      try {\n        setLoading(true);\n        if (!(currentTournament !== null && currentTournament !== void 0 && currentTournament.id)) return;\n        const q = query(collection(db, `tournaments/${currentTournament.id}/matches`), orderBy(\"date\"), orderBy(\"time\"));\n        const snapshot = await getDocs(q);\n        const result = snapshot.docs.map(doc => {\n          var _doc$data$date, _doc$data$date$toDate;\n          return {\n            id: doc.id,\n            ...doc.data(),\n            // Convert Firestore Timestamp to Date if needed\n            date: ((_doc$data$date = doc.data().date) === null || _doc$data$date === void 0 ? void 0 : (_doc$data$date$toDate = _doc$data$date.toDate) === null || _doc$data$date$toDate === void 0 ? void 0 : _doc$data$date$toDate.call(_doc$data$date)) || doc.data().date\n          };\n        });\n        setMatches(result);\n      } catch (err) {\n        console.error(\"Error fetching matches:\", err);\n        setError(\"Failed to load matches\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchMatches();\n  }, [currentTournament === null || currentTournament === void 0 ? void 0 : currentTournament.id]); // Only rerun when tournament ID changes\n\n  const fullName = user ? `${user.firstName} ${user.lastName}` : '';\n  const relevantMatches = matches.filter(m => m.team1 === fullName || m.team2 === fullName || m.umpire === fullName);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 max-w-3xl mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 dark:text-gray-300\",\n        children: \"Loading matches...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 max-w-3xl mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 dark:text-red-400\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 max-w-3xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-xl font-bold mb-4 text-black dark:text-white\",\n      children: \"Your Match Agenda\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), currentTournament && /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-lg mb-4 dark:text-gray-300\",\n      children: [\"Tournament: \", currentTournament.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), relevantMatches.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 dark:text-gray-300\",\n      children: \"No matches found for your name.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"space-y-4\",\n      children: relevantMatches.map(match => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"border rounded-lg p-4 bg-white dark:bg-gray-700 shadow hover:shadow-md transition-shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-md font-semibold dark:text-white\",\n          children: [dayjs(match.date).format(\"dddd, MMM D\"), \" at \", match.time]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm dark:text-gray-300 mt-2 space-y-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Division:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 22\n            }, this), \" \", match.division]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Teams:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 22\n            }, this), \" \", match.team1, \" vs \", match.team2]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this), match.umpire && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Umpire:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 39\n            }, this), \" \", match.umpire]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 34\n          }, this), match.venue && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Venue:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 38\n            }, this), \" \", match.venue]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this)]\n      }, match.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(Agenda, \"Jb4vNCDiuSEE55MclH2YzbPayIU=\", false, function () {\n  return [useAuth, useTournament];\n});\n_c = Agenda;\nvar _c;\n$RefreshReg$(_c, \"Agenda\");","map":{"version":3,"names":["useEffect","useState","collection","getDocs","query","orderBy","db","useAuth","dayjs","useTournament","jsxDEV","_jsxDEV","Agenda","_s","user","currentTournament","matches","setMatches","loading","setLoading","error","setError","fetchMatches","id","q","snapshot","result","docs","map","doc","_doc$data$date","_doc$data$date$toDate","data","date","toDate","call","err","console","fullName","firstName","lastName","relevantMatches","filter","m","team1","team2","umpire","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","length","match","format","time","division","venue","_c","$RefreshReg$"],"sources":["/Users/andrewhall-villiers/Downloads/Match Report/match-report-app-final-complete/src/pages/Agenda.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { collection, getDocs, query, orderBy } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../context/AuthContext\";\nimport dayjs from \"dayjs\";\nimport { useTournament } from '../context/TournamentContext';\n\nexport default function Agenda() {\n  const { user } = useAuth();\n  const { currentTournament } = useTournament();\n  const [matches, setMatches] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchMatches = async () => {\n      try {\n        setLoading(true);\n        if (!currentTournament?.id) return;\n        \n        const q = query(\n          collection(db, `tournaments/${currentTournament.id}/matches`),\n          orderBy(\"date\"),\n          orderBy(\"time\")\n        );\n        const snapshot = await getDocs(q);\n        const result = snapshot.docs.map(doc => ({ \n          id: doc.id, \n          ...doc.data(),\n          // Convert Firestore Timestamp to Date if needed\n          date: doc.data().date?.toDate?.() || doc.data().date\n        }));\n        setMatches(result);\n      } catch (err) {\n        console.error(\"Error fetching matches:\", err);\n        setError(\"Failed to load matches\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchMatches();\n  }, [currentTournament?.id]);  // Only rerun when tournament ID changes\n\n  const fullName = user ? `${user.firstName} ${user.lastName}` : '';\n\n  const relevantMatches = matches.filter(\n    m =>\n      m.team1 === fullName ||\n      m.team2 === fullName ||\n      m.umpire === fullName\n  );\n\n  if (loading) {\n    return (\n      <div className=\"p-4 max-w-3xl mx-auto\">\n        <p className=\"text-gray-700 dark:text-gray-300\">Loading matches...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 max-w-3xl mx-auto\">\n        <p className=\"text-red-500 dark:text-red-400\">{error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 max-w-3xl mx-auto\">\n      <h1 className=\"text-xl font-bold mb-4 text-black dark:text-white\">Your Match Agenda</h1>\n      {currentTournament && (\n        <h2 className=\"text-lg mb-4 dark:text-gray-300\">\n          Tournament: {currentTournament.name}\n        </h2>\n      )}\n      \n      {relevantMatches.length === 0 ? (\n        <p className=\"text-gray-700 dark:text-gray-300\">No matches found for your name.</p>\n      ) : (\n        <ul className=\"space-y-4\">\n          {relevantMatches.map(match => (\n            <li \n              key={match.id} \n              className=\"border rounded-lg p-4 bg-white dark:bg-gray-700 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"text-md font-semibold dark:text-white\">\n                {dayjs(match.date).format(\"dddd, MMM D\")} at {match.time}\n              </div>\n              <div className=\"text-sm dark:text-gray-300 mt-2 space-y-1\">\n                <div><span className=\"font-medium\">Division:</span> {match.division}</div>\n                <div><span className=\"font-medium\">Teams:</span> {match.team1} vs {match.team2}</div>\n                {match.umpire && <div><span className=\"font-medium\">Umpire:</span> {match.umpire}</div>}\n                {match.venue && <div><span className=\"font-medium\">Venue:</span> {match.venue}</div>}\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}