(self.webpackChunkmatch_report_app=self.webpackChunkmatch_report_app||[]).push([[591],{446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",s="second",i="minute",a="hour",u="day",l="week",o="month",d="quarter",c="year",h="date",m="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,o),i=n-s<0,a=t.clone().add(r+(i?-1:1),o);return+(-(r+(n-s)/(i?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:o,y:c,w:l,d:u,D:h,h:a,m:i,s:s,ms:r,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",$={};$[b]=p;var w="$isDayjsObject",y=function(e){return e instanceof M||!(!e||!e[w])},j=function e(t,n,r){var s;if(!t)return b;if("string"==typeof t){var i=t.toLowerCase();$[i]&&(s=i),n&&($[i]=n,s=i);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var u=t.name;$[u]=t,s=u}return!r&&s&&(b=s),s||!r&&b},N=function(e,t){if(y(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new M(n)},D=g;D.l=j,D.i=y,D.w=function(e,t){return N(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function p(e){this.$L=j(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var v=p.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(D.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return D},v.isValid=function(){return!(this.$d.toString()===m)},v.isSame=function(e,t){var n=N(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return N(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<N(e)},v.$g=function(e,t,n){return D.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,r=!!D.u(t)||t,d=D.p(e),m=function(e,t){var s=D.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?s:s.endOf(u)},f=function(e,t){return D.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},x=this.$W,p=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case c:return r?m(1,0):m(31,11);case o:return r?m(1,p):m(0,p+1);case l:var b=this.$locale().weekStart||0,$=(x<b?x+7:x)-b;return m(r?v-$:v+(6-$),p);case u:case h:return f(g+"Hours",0);case a:return f(g+"Minutes",1);case i:return f(g+"Seconds",2);case s:return f(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var n,l=D.p(e),d="set"+(this.$u?"UTC":""),m=(n={},n[u]=d+"Date",n[h]=d+"Date",n[o]=d+"Month",n[c]=d+"FullYear",n[a]=d+"Hours",n[i]=d+"Minutes",n[s]=d+"Seconds",n[r]=d+"Milliseconds",n)[l],f=l===u?this.$D+(t-this.$W):t;if(l===o||l===c){var x=this.clone().set(h,1);x.$d[m](f),x.init(),this.$d=x.set(h,Math.min(this.$D,x.daysInMonth())).$d}else m&&this.$d[m](f);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[D.p(e)]()},v.add=function(r,d){var h,m=this;r=Number(r);var f=D.p(d),x=function(e){var t=N(m);return D.w(t.date(t.date()+Math.round(e*r)),m)};if(f===o)return this.set(o,this.$M+r);if(f===c)return this.set(c,this.$y+r);if(f===u)return x(1);if(f===l)return x(7);var p=(h={},h[i]=t,h[a]=n,h[s]=e,h)[f]||1,v=this.$d.getTime()+r*p;return D.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||m;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=D.z(this),i=this.$H,a=this.$m,u=this.$M,l=n.weekdays,o=n.months,d=n.meridiem,c=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},h=function(e){return D.s(i%12||12,e,"0")},f=d||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(x,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return D.s(t.$y,4,"0");case"M":return u+1;case"MM":return D.s(u+1,2,"0");case"MMM":return c(n.monthsShort,u,o,3);case"MMMM":return c(o,u);case"D":return t.$D;case"DD":return D.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return c(n.weekdaysMin,t.$W,l,2);case"ddd":return c(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return D.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(i,a,!0);case"A":return f(i,a,!1);case"m":return String(a);case"mm":return D.s(a,2,"0");case"s":return String(t.$s);case"ss":return D.s(t.$s,2,"0");case"SSS":return D.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,h,m){var f,x=this,p=D.p(h),v=N(r),g=(v.utcOffset()-this.utcOffset())*t,b=this-v,$=function(){return D.m(x,v)};switch(p){case c:f=$()/12;break;case o:f=$();break;case d:f=$()/3;break;case l:f=(b-g)/6048e5;break;case u:f=(b-g)/864e5;break;case a:f=b/n;break;case i:f=b/t;break;case s:f=b/e;break;default:f=b}return m?f:D.a(f)},v.daysInMonth=function(){return this.endOf(o).$D},v.$locale=function(){return $[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=j(e,t,!0);return r&&(n.$L=r),n},v.clone=function(){return D.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),S=M.prototype;return N.prototype=S,[["$ms",r],["$s",s],["$m",i],["$H",a],["$W",u],["$M",o],["$y",c],["$D",h]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),N.extend=function(e,t){return e.$i||(e(t,M,N),e.$i=!0),N},N.locale=j,N.isDayjs=y,N.unix=function(e){return N(1e3*e)},N.en=$[b],N.Ls=$,N.p={},N}()},591:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(43),s=n(472),i=n(791),a=n(742),u=n(446),l=n.n(u),o=n(579);function d(e){switch(e){case"MEN":return"bg-blue-600";case"WOMEN":return"bg-pink-600";case"22/U Boys":return"bg-green-600";case"22/U Girls":return"bg-yellow-600";default:return"bg-gray-700"}}function c(){const e={width:"150px",height:"100px"},t={fontSize:"clamp(0.75rem, 1vw, 1rem)"},n={width:"30px",height:"40px"},{currentTournament:u,tournaments:c,setCurrentTournament:h}=(0,a.Nv)(),[m,f]=(0,r.useState)([]),[x,p]=(0,r.useState)([]),[v,g]=(0,r.useState)(!0),[b,$]=(0,r.useState)(null),[w,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[D,M]=(0,r.useState)({firstName:"",lastName:"",nickname:""}),[S,k]=(0,r.useState)(""),[_,C]=(0,r.useState)({division:"",dateFrom:"",dateTo:"",umpireStatus:""}),[T,O]=(0,r.useState)(!1);(0,r.useEffect)((()=>{!u&&c.length>0&&h(c[0])}),[u,c,h]),(0,r.useEffect)((()=>{(async()=>{try{if(g(!0),$(null),null===u||void 0===u||!u.id)return void g(!1);let e=(0,s.rJ)(i.db,`tournaments/${u.id}/matches`);if(_.dateFrom){const t=new Date(_.dateFrom);t.setHours(0,0,0,0),e=(0,s.P)(e,(0,s._M)("date",">=",s.Dc.fromDate(t)))}if(_.dateTo){const t=new Date(_.dateTo);t.setHours(23,59,59,999),e=(0,s.P)(e,(0,s._M)("date","<=",s.Dc.fromDate(t)))}_.division&&(e=(0,s.P)(e,(0,s._M)("division","==",_.division))),"assigned"===_.umpireStatus?e=(0,s.P)(e,(0,s._M)("umpireId","!=","")):"unassigned"===_.umpireStatus&&(e=(0,s.P)(e,(0,s._M)("umpireId","==","")));const[t,n]=await Promise.all([(0,s.GG)(e),(0,s.GG)((0,s.P)((0,s.rJ)(i.db,"users"),(0,s._M)("role","==","umpire")))]),r=t.docs.map((e=>{const t=e.data();let n;try{var r,i;n=(null===(r=t.date)||void 0===r||null===(i=r.toDate)||void 0===i?void 0:i.call(r))||t.date,n instanceof s.Dc&&(n=n.toDate())}catch(a){console.error("Error parsing date:",a),n=new Date}return{id:e.id,...t,date:n,time:t.time||"00:00"}})),a=n.docs.map((e=>({id:e.id,firstName:e.data().firstName||"",lastName:e.data().lastName||"",nickname:e.data().nickname||null,...e.data()})));f(r),p(a)}catch(e){console.error("Error fetching data:",e),$("Failed to load data. Please try again.")}finally{g(!1)}})()}),[null===u||void 0===u?void 0:u.id,_]);x.filter((e=>{var t;const n=S.toLowerCase(),r=`${e.firstName} ${e.lastName}`.toLowerCase(),s=(null===(t=e.nickname)||void 0===t?void 0:t.toLowerCase())||"";return r.includes(n)||s.includes(n)||e.id.toLowerCase().includes(n)}));const Y=e=>{const{name:t,value:n}=e.target;C((e=>({...e,[t]:n})))},F=()=>{C({division:"",dateFrom:"",dateTo:"",umpireStatus:""})};if(v&&u)return(0,o.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,o.jsxs)("div",{className:"text-white",children:["Loading matches for ",u.name,"..."]})});if(b)return(0,o.jsxs)("div",{className:"p-4 bg-red-900 rounded text-white",children:[(0,o.jsx)("p",{className:"font-bold",children:"Error:"}),(0,o.jsx)("p",{children:b}),(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-white text-red-900 rounded",children:"Retry"})]});const H=[...new Set(m.map((e=>e.division)))].filter((e=>"MIXED"!==e)),I=(Math.max(...m.map((e=>`${e.home||""} vs ${e.away||""}`.length)),10),Array.from(new Set(m.map((e=>e.court)).filter(Boolean))).sort(((e,t)=>{var n,r;return parseInt((null===(n=e.match(/\d+/))||void 0===n?void 0:n[0])||"0",20)-parseInt((null===(r=t.match(/\d+/))||void 0===r?void 0:r[0])||"0",20)})));return(0,o.jsxs)("div",{className:"p-4 max-w-6xl mx-auto",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"text-white mr-2",children:"Current Tournament:"}),(0,o.jsxs)("select",{className:"p-2 rounded bg-white text-black",value:(null===u||void 0===u?void 0:u.id)||"",onChange:e=>{const t=c.find((t=>t.id===e.target.value));h(t)},children:[(0,o.jsx)("option",{value:"",children:"Select..."}),c.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Umpire Appointments for ",(null===u||void 0===u?void 0:u.name)||"No Tournament Selected"]}),(0,o.jsx)("button",{onClick:()=>O((e=>!e)),className:"px-4 py-2 rounded text-white "+(T?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"),children:T?"Done Editing":"Edit Umpires"})]}),(0,o.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Match Filters"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-white text-sm mb-1",children:"Division"}),(0,o.jsxs)("select",{name:"division",value:_.division,onChange:Y,className:"w-full p-2 rounded bg-white text-black",children:[(0,o.jsx)("option",{value:"",children:"All Divisions"}),H.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-white text-sm mb-1",children:"From Date"}),(0,o.jsx)("input",{type:"date",name:"dateFrom",value:_.dateFrom,onChange:Y,className:"w-full p-2 rounded bg-white text-black"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-white text-sm mb-1",children:"To Date"}),(0,o.jsx)("input",{type:"date",name:"dateTo",value:_.dateTo,onChange:Y,className:"w-full p-2 rounded bg-white text-black"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-white text-sm mb-1",children:"Umpire Status"}),(0,o.jsxs)("select",{name:"umpireStatus",value:_.umpireStatus,onChange:Y,className:"w-full p-2 rounded bg-white text-black",children:[(0,o.jsx)("option",{value:"",children:"All"}),(0,o.jsx)("option",{value:"assigned",children:"Assigned"}),(0,o.jsx)("option",{value:"unassigned",children:"Unassigned"})]})]}),(0,o.jsx)("div",{className:"flex items-end",children:(0,o.jsx)("button",{onClick:F,className:"px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600 w-full",children:"Reset Filters"})})]})]}),0===m.length?(0,o.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg text-white",children:[(0,o.jsx)("p",{children:"No matches found matching your criteria."}),(0,o.jsx)("button",{onClick:F,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Clear Filters"})]}):(0,o.jsx)(o.Fragment,{children:Object.entries(m.reduce(((e,t)=>{const n=l()(t.date).format("YYYY-MM-DD");return e[n]||(e[n]=[]),e[n].push(t),e}),{})).sort(((e,t)=>{let[n]=e,[r]=t;return new Date(n)-new Date(r)})).map((r=>{let[a,c]=r;const h=I,m=[...new Set(c.map((e=>e.time)))].sort();return(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("div",{className:"bg-gray-700 p-3 rounded-t-lg",children:(0,o.jsx)("h3",{className:"text-xl font-semibold text-white",children:l()(a).format("dddd, D MMMM YYYY")})}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full table-auto bg-gray-800 rounded-lg",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"p-3 text-white font-medium text-center",style:n,children:"Time"}),h.map((e=>(0,o.jsx)("th",{className:"p-3 text-white font-medium text-center",style:n,children:e},e)))]})}),(0,o.jsx)("tbody",{children:m.map((r=>(0,o.jsxs)("tr",{className:"border-t border-gray-700",children:[(0,o.jsx)("td",{className:"p-3 text-white font-medium text-center",style:n,children:r}),h.map((n=>{const a=c.find((e=>e.time===r&&e.court===n));return(0,o.jsx)("td",{className:"p-2 align-top",style:e,children:(0,o.jsxs)("div",{className:`${d(null===a||void 0===a?void 0:a.division)} p-2 rounded flex flex-col justify-between h-full w-full`,style:t,children:[a&&(0,o.jsx)("div",{className:"text-xs font-bold text-white mb-1",children:a.division}),a&&(0,o.jsx)("div",{className:"text-white text-lg font-semibold mb-1",children:`${a.home||"TBD"} vs ${a.away||"TBD"}`}),a&&(0,o.jsx)("select",{className:"w-full p-2 rounded bg-white text-black",value:a.umpireId||"",onChange:e=>(async(e,t)=>{try{y(e);const n=x.find((e=>e.id===t));if(!n||null===u||void 0===u||!u.id)return;const r=n.nickname||`${n.firstName} ${n.lastName}`;await(0,s.mZ)((0,s.H9)(i.db,`tournaments/${u.id}/matches`,e),{umpire:r,umpireId:n.id}),f((t=>t.map((t=>t.id===e?{...t,umpire:r,umpireId:n.id}:t))))}catch(n){console.error("Error assigning umpire:",n),$("Failed to assign umpire")}finally{y(null)}})(a.id,e.target.value),disabled:!T||w===a.id,children:w===a.id?(0,o.jsx)("option",{children:"Assigning..."}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"",children:a.umpire||"Select Umpire"}),x.map((e=>(0,o.jsx)("option",{value:e.id,children:e.nickname||`${e.firstName} ${e.lastName}`},e.id)))]})})]})},n)}))]},r)))})]})})]},a)}))})]})}}}]);
//# sourceMappingURL=591.1ed468d0.chunk.js.map